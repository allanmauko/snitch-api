  [1m[36mActiveRecord::SchemaMigration Load (24.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (122.2ms)[0m  [1mDROP DATABASE IF EXISTS "dummy_test"[0m
  [1m[35m (368.5ms)[0m  CREATE DATABASE "dummy_test" ENCODING = 'unicode'
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (3.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (1.1ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('0')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------
PgRecommenderTest: test_truth
-----------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (29.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (133.1ms)[0m  [1mDROP DATABASE IF EXISTS "dummy_test"[0m
  [1m[35m (404.0ms)[0m  CREATE DATABASE "dummy_test" ENCODING = 'unicode'
  [1m[36mSQL (0.6ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (7.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (1.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('0')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------
PgRecommenderTest: test_truth
-----------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (31.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (127.2ms)[0m  [1mDROP DATABASE IF EXISTS "dummy_test"[0m
  [1m[35m (400.2ms)[0m  CREATE DATABASE "dummy_test" ENCODING = 'unicode'
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (7.2ms)[0m  CREATE TABLE "books" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "books_users" ("id" serial primary key, "book_id" integer, "user_id" integer) [0m
  [1m[35m (1.5ms)[0m  CREATE UNIQUE INDEX  "index_books_users_on_book_id_and_user_id" ON "books_users" USING btree ("book_id", "user_id")
  [1m[36m (1.3ms)[0m  [1mCREATE  INDEX  "index_books_users_on_user_id" ON "books_users" USING btree ("user_id")[0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (0.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001909')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123001813')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001819')
  [1m[35mActiveRecord::SchemaMigration Load (0.7ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------
PgRecommenderTest: test_truth
-----------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------
BookTest: test_book_count
-------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------
BookTest: test_book_count
-------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (9.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------
BookTest: test_book_count
-------------------------
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (26.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (3.4ms)[0m  ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (28.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 266251676)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 355234476)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (2.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 00:56:37', '2017-01-23 00:56:37', 41582118)[0m
  [1m[35m (2.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------
BookTest: test_book_count
-------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (26.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (6.0ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (8.9ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 355234476)[0m
  [1m[35mFixture Delete (2.1ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (5.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (34.0ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 00:59:24', '2017-01-23 00:59:24', 41582118)[0m
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------
BookTest: test_book_fixtures_loaded
-----------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------
BookTest: test_similar_by_is_defined
------------------------------------
  [1m[35mBook Load (2.1ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (10.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (28.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (20.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.7ms)[0m  ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (3.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (8.5ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 355234476)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (2.7ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:06:37', '2017-01-23 01:06:37', 41582118)[0m
  [1m[35m (2.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
BookTest: test_similar_by_returns_similar_books
-----------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (11.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT {:n_results=>2}
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------
BookTest: test_per-association_similarity_methods_are_defined
-------------------------------------------------------------
  [1m[36mBook Load (6.0ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------
BookTest: test_similar_by_is_defined
------------------------------------
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------
BookTest: test_book_fixtures_loaded
-----------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.9ms)[0m  ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (4.0ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (1.8ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 857228561)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 355234476)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 283047497)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:07:22', '2017-01-23 01:07:22', 41582118)[0m
  [1m[35m (2.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------
BookTest: test_book_fixtures_loaded
-----------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------
BookTest: test_similar_by_is_defined
------------------------------------
  [1m[35mBook Load (0.8ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------
BookTest: test_per-association_similarity_methods_are_defined
-------------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
BookTest: test_similar_by_returns_similar_books
-----------------------------------------------
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (6.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (127.3ms)[0m  [1mDROP DATABASE IF EXISTS "dummy_test"[0m
  [1m[35m (397.0ms)[0m  CREATE DATABASE "dummy_test" ENCODING = 'unicode'
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (22.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "intarray"
  [1m[36m (8.0ms)[0m  [1mCREATE TABLE "books" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE TABLE "books_users" ("id" serial primary key, "book_id" integer, "user_id" integer) 
  [1m[36m (1.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_books_users_on_book_id_and_user_id" ON "books_users" USING btree ("book_id", "user_id")[0m
  [1m[35m (0.9ms)[0m  CREATE  INDEX  "index_books_users_on_user_id" ON "books_users" USING btree ("user_id")
  [1m[36m (6.4ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (1.0ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123010745')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001813')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123001819')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001909')
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (6.0ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 355234476)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (16.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (11.8ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 492947529)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 947276790)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:08:31', '2017-01-23 01:08:31', 41582118)
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------
BookTest: test_book_fixtures_loaded
-----------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------
BookTest: test_per-association_similarity_methods_are_defined
-------------------------------------------------------------
  [1m[36mBook Load (0.7ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------
BookTest: test_similar_by_is_defined
------------------------------------
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
BookTest: test_similar_by_returns_similar_books
-----------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (13.9ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (21.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (29.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (20.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (8.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (50.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (9.1ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (2.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (10.5ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 905081421)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 355234476)
  [1m[36mFixture Delete (1.3ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (18.9ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (5.5ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 557192574)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 944878372)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 492947529)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 165965450)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 3097974)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 283047497)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 947706656)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:16:07', '2017-01-23 01:16:07', 41582118)
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[36mActiveRecord::SchemaMigration Load (24.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.5ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (1.8ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (29.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (7.3ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 355234476)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (2.7ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:17:32', '2017-01-23 01:17:32', 41582118)
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.7ms)[0m  ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (2.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 266251676)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 640965601)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 355234476)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 944878372)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 283047497)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:17:43', '2017-01-23 01:17:43', 41582118)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (21.4ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (1.2ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (2.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (22.7ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (1.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (1.3ms)[0m  ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (2.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 905081421)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 355234476)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:18:38', '2017-01-23 01:18:38', 41582118)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (27.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (9.0ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (29.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (7.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 266251676)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 644331355)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 640965601)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 168464791)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 905081421)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 01:19:26', '2017-01-23 01:19:26', 355234476)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 557192574)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 492947529)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 3097974)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 283047497)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 947706656)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 947276790)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 01:19:27', '2017-01-23 01:19:27', 41582118)
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (21.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.1ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (2.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (1.5ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (7.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 355234476)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (2.9ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 02:23:23', '2017-01-23 02:23:23', 41582118)
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (22.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (2.0ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (28.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (1.1ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (1.0ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (7.6ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 266251676)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 644331355)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 168464791)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 572977986)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 905081421)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 355234476)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (2.9ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 02:23:49', '2017-01-23 02:23:49', 41582118)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (1.1ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (2.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 355234476)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (2.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 947276790)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 02:24:02', '2017-01-23 02:24:02', 41582118)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (25.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (9.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (1.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (7.6ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 266251676)
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 644331355)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 905081421)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 355234476)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (24.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (2.0ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 944878372)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 492947529)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 165965450)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 02:24:47', '2017-01-23 02:24:47', 41582118)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (25.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (1.0ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (0.6ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 355234476)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 02:24:57', '2017-01-23 02:24:57', 41582118)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (1.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (2.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (25.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (1.3ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (7.9ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 905081421)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 355234476)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 02:25:55', '2017-01-23 02:25:55', 41582118)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
PgRecommenderTest: test_module_exists
-------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 4
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (22.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (2.0ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (27.1ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (1.2ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM books_users AS t1, books_users AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 4
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (1.1ms)[0m  [1mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (1.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (24.8ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 355234476)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (4.4ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 3097974)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-23 03:09:45', '2017-01-23 03:09:45', 41582118)
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (29.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (130.5ms)[0m  [1mDROP DATABASE IF EXISTS "dummy_test"[0m
  [1m[35m (399.5ms)[0m  CREATE DATABASE "dummy_test" ENCODING = 'unicode'
  [1m[36mSQL (0.7ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (43.6ms)[0m  CREATE EXTENSION IF NOT EXISTS "intarray"
  [1m[36m (4.7ms)[0m  [1mCREATE TABLE "books" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (3.2ms)[0m  CREATE TABLE "books_users" ("id" serial primary key, "book_id" integer, "user_id" integer) 
  [1m[36m (1.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_books_users_on_book_id_and_user_id" ON "books_users" USING btree ("book_id", "user_id")[0m
  [1m[35m (1.3ms)[0m  CREATE  INDEX  "index_books_users_on_user_id" ON "books_users" USING btree ("user_id")
  [1m[36m (4.8ms)[0m  [1mCREATE TABLE "likes" ("id" serial primary key, "user_id" integer, "book_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.8ms)[0m  CREATE  INDEX  "index_likes_on_book_id" ON "likes" USING btree ("book_id")
  [1m[36m (1.1ms)[0m  [1mCREATE  INDEX  "index_likes_on_user_id" ON "likes" USING btree ("user_id")[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE "tags" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (5.0ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (8.5ms)[0m  ALTER TABLE "likes" ADD CONSTRAINT "fk_rails_15895dfb71"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")

  [1m[36m (7.6ms)[0m  [1mALTER TABLE "likes" ADD CONSTRAINT "fk_rails_1e09b5dabf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (1.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170125030446')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001813')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123001819')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001909')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123010745')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170125030342')
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (17.2ms)[0m  [1mALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (23.8ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 355234476)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 944878372)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 492947529)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 3097974)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:26:28', '2017-01-25 03:26:28', 41582118)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.9ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mActiveRecord::SchemaMigration Load (25.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (146.4ms)[0m  [1mDROP DATABASE IF EXISTS "dummy_test"[0m
  [1m[35m (391.0ms)[0m  CREATE DATABASE "dummy_test" ENCODING = 'unicode'
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (32.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "intarray"
  [1m[36m (4.7ms)[0m  [1mCREATE TABLE "books" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "author_id" integer) [0m
  [1m[35m (1.3ms)[0m  CREATE  INDEX  "index_books_on_author_id" ON "books" USING btree ("author_id")
  [1m[36m (2.0ms)[0m  [1mCREATE TABLE "books_users" ("id" serial primary key, "book_id" integer, "user_id" integer) [0m
  [1m[35m (0.9ms)[0m  CREATE UNIQUE INDEX  "index_books_users_on_book_id_and_user_id" ON "books_users" USING btree ("book_id", "user_id")
  [1m[36m (1.4ms)[0m  [1mCREATE  INDEX  "index_books_users_on_user_id" ON "books_users" USING btree ("user_id")[0m
  [1m[35m (3.9ms)[0m  CREATE TABLE "likes" ("id" serial primary key, "user_id" integer, "book_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.0ms)[0m  [1mCREATE  INDEX  "index_likes_on_book_id" ON "likes" USING btree ("book_id")[0m
  [1m[35m (0.8ms)[0m  CREATE  INDEX  "index_likes_on_user_id" ON "likes" USING btree ("user_id")
  [1m[36m (3.7ms)[0m  [1mCREATE TABLE "tags" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.7ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "likes" ADD CONSTRAINT "fk_rails_15895dfb71"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
[0m
  [1m[35m (1.8ms)[0m  ALTER TABLE "likes" ADD CONSTRAINT "fk_rails_1e09b5dabf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (1.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170125032813')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123001813')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001819')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123001909')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123010745')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170125030342')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170125030446')
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (6.4ms)[0m  [1mALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (17.6ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 266251676)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 905081421)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 355234476)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (21.9ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (6.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 944878372)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:34:38', '2017-01-25 03:34:38', 41582118)
  [1m[36m (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (22.4ms)[0m  ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35mBook Load (0.5ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (1.9ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.5ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (1.1ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.5ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 355234476)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 944878372)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 492947529)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 165965450)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 3097974)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 283047497)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 947706656)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 947276790)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:35:09', '2017-01-25 03:35:09', 41582118)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.7ms)[0m  ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 905081421)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 355234476)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:35:34', '2017-01-25 03:35:34', 41582118)[0m
  [1m[35m (5.2ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (1.0ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.1ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (1.7ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (3.2ms)[0m  ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (6.0ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 266251676)[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 644331355)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 640965601)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 168464791)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 572977986)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 857228561)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 436277767)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 905081421)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 355234476)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (6.0ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:37:07', '2017-01-25 03:37:07', 41582118)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.1ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 355234476)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:38:50', '2017-01-25 03:38:50', 41582118)
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (13.1ms)[0m            WITH similar_items AS (
            SELECT
              t2.,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1. = 168464791 and t2. != 168464791
            GROUP BY t2.
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m            WITH similar_items AS (
            SELECT
              t2.,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1. = 168464791 and t2. != 168464791
            GROUP BY t2.
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (24.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (4.1ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (3.7ms)[0m  ALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (18.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 266251676)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 644331355)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 355234476)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "books_users"
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (3.5ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:42:29', '2017-01-25 03:42:29', 41582118)[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (0.6ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.8ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (1.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (3.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (2.4ms)[0m  [1mALTER TABLE "books_users" DISABLE TRIGGER ALL;ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 266251676)
  [1m[36mFixture Insert (3.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 644331355)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 640965601)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 168464791)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 436277767)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 905081421)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 355234476)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (944878372, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (492947529, 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (283047497, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947706656, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (947276790, 355234476)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 355234476)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_users" ("user_id", "book_id") VALUES (41582118, 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:42:37', '2017-01-25 03:42:37', 41582118)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "books_users" ENABLE TRIGGER ALL;ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[36mActiveRecord::SchemaMigration Load (24.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (138.1ms)[0m  [1mDROP DATABASE IF EXISTS "dummy_test"[0m
  [1m[35m (429.6ms)[0m  CREATE DATABASE "dummy_test" ENCODING = 'unicode'
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (38.6ms)[0m  CREATE EXTENSION IF NOT EXISTS "intarray"
  [1m[36m (4.8ms)[0m  [1mCREATE TABLE "books" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "author_id" integer) [0m
  [1m[35m (1.2ms)[0m  CREATE  INDEX  "index_books_on_author_id" ON "books" USING btree ("author_id")
  [1m[36m (2.4ms)[0m  [1mCREATE TABLE "books_tags" ("id" serial primary key, "book_id" integer, "tag_id" integer) [0m
  [1m[35m (0.9ms)[0m  CREATE  INDEX  "index_books_tags_on_book_id" ON "books_tags" USING btree ("book_id")
  [1m[36m (1.2ms)[0m  [1mCREATE  INDEX  "index_books_tags_on_tag_id" ON "books_tags" USING btree ("tag_id")[0m
  [1m[35m (2.5ms)[0m  CREATE TABLE "likes" ("id" serial primary key, "user_id" integer, "book_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.1ms)[0m  [1mCREATE  INDEX  "index_likes_on_book_id" ON "likes" USING btree ("book_id")[0m
  [1m[35m (0.9ms)[0m  CREATE  INDEX  "index_likes_on_user_id" ON "likes" USING btree ("user_id")
  [1m[36m (4.2ms)[0m  [1mCREATE TABLE "tags" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (3.0ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "books_tags" ADD CONSTRAINT "fk_rails_a8df0c97a8"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
[0m
  [1m[35m (1.8ms)[0m  ALTER TABLE "books_tags" ADD CONSTRAINT "fk_rails_988fcbe806"
FOREIGN KEY ("tag_id")
  REFERENCES "tags" ("id")

  [1m[36m (1.5ms)[0m  [1mALTER TABLE "likes" ADD CONSTRAINT "fk_rails_15895dfb71"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
[0m
  [1m[35m (1.3ms)[0m  ALTER TABLE "likes" ADD CONSTRAINT "fk_rails_1e09b5dabf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (1.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170125034341')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123001813')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123001819')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170123001909')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170123010745')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170125030342')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170125030446')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20170125032813')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20170125034331')
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (17.0ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (17.0ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:44:26', '2017-01-25 03:44:26', 355234476)
  [1m[36mFixture Delete (12.5ms)[0m  [1mDELETE FROM "books_users"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (16.6ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mBook Load (0.6ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (1.9ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 644331355)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 355234476)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (9.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 557192574)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 944878372)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 492947529)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 165965450)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 3097974)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 283047497)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 947706656)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 947276790)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:44:59', '2017-01-25 03:44:59', 41582118)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (14.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (8.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'books'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'books_tags'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'likes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tags'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (12.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.1ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (25.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (2.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (17.4ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (6.5ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 640965601)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 355234476)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:46:07', '2017-01-25 03:46:07', 41582118)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.7ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 644331355)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 355234476)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:46:20', '2017-01-25 03:46:20', 41582118)[0m
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (6.0ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (1.0ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (18.3ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.5ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (2.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 644331355)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Twilight', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 640965601)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 355234476)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-25 03:46:58', '2017-01-25 03:46:58', 41582118)[0m
  [1m[35m (4.8ms)[0m  COMMIT
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (1.0ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (19.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (4.2ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.5ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (28.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.4ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (6.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (18.5ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (6.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (23.7ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (905081421, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (905081421, 223486541)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (355234476, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (355234476, 223486541)
  [1m[36mFixture Insert (4.6ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 168464791)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 572977986)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 436277767)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 905081421)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 355234476)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-26 02:09:27', '2017-01-26 02:09:27', 41582118)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (1.7ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (26.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (14.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (7.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (24.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (26.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.6ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (1.6ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (30.2ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (7.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (14.2ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (24.6ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (905081421, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (905081421, 223486541)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (355234476, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (355234476, 223486541)[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 508637499)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 355234476)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 3097974)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 283047497)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-26 02:14:30', '2017-01-26 02:14:30', 41582118)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (29.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (4.0ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (30.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (7.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35mBook Load (11.6ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.7ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 4
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (3.7ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (19.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (905081421, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (905081421, 223486541)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (355234476, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (355234476, 223486541)[0m
  [1m[35mFixture Insert (2.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 436277767)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Mandolin', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 905081421)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Piano', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 355234476)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 283047497)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 947706656)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 947276790)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-26 02:16:56', '2017-01-26 02:16:56', 41582118)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (28.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.9ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (26.3ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (26.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (3.0ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (25.6ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 644331355)
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 508637499)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 168464791)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 572977986)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 857228561)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 436277767)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.5ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 557192574)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 944878372)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 492947529)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 165965450)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 3097974)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 947706656)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 947276790)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-26 02:19:37', '2017-01-26 02:19:37', 41582118)[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[36mActiveRecord::SchemaMigration Load (28.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (32.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.6ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (1.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (13.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (6.2ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (20.6ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 436277767)[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.5ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 557192574)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 283047497)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 947706656)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 947276790)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-26 02:25:30', '2017-01-26 02:25:30', 41582118)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (8.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (6.1ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (41.4ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (16.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.7ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (1.0ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (2.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.6ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (1.0ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (7.0ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (6.7ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 436277767)
  [1m[36mFixture Delete (2.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (2.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 557192574)
  [1m[36mFixture Insert (3.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 944878372)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 492947529)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 165965450)[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 3097974)
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 283047497)[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Maggie', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 947706656)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Mark', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 947276790)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Musician Melanie', '2017-01-26 02:25:48', '2017-01-26 02:25:48', 41582118)
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (3.4ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (27.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (29.0ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (6.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (13.7ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (2.9ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (42.4ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (6.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 508637499)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 436277767)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 944878372)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 165965450)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 3097974)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:30:56', '2017-01-26 02:30:56', 283047497)[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (35.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (1.7ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (58.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (14.7ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (6.4ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (56.7ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (49.6ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 508637499)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 168464791)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 436277767)
  [1m[36mFixture Delete (10.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (32.9ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 557192574)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 944878372)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 492947529)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 165965450)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 3097974)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:32:06', '2017-01-26 02:32:06', 283047497)[0m
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (6.1ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (29.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.7ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.5ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (8.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (30.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (6.8ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (23.5ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (1.7ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 436277767)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:32:35', '2017-01-26 02:32:35', 283047497)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (1.3ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (29.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (26.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.9ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (29.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (12.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (19.9ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (36.4ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 857228561)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 436277767)[0m
  [1m[35mFixture Delete (2.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (5.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 557192574)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 944878372)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 492947529)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 165965450)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 3097974)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:40:57', '2017-01-26 02:40:57', 283047497)
  [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.3ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.5ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.5ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.8ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.5ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (1.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (1.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mActiveRecord::SchemaMigration Load (24.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (5.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (26.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (27.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.5ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.7ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "likes"
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (3.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (6.2ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (21.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 436277767)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:44:04', '2017-01-26 02:44:04', 283047497)
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (21.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (3.9ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (5.7ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (6.1ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (29.7ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.5ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:45:11', '2017-01-26 02:45:11', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:45:11', '2017-01-26 02:45:11', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:45:11', '2017-01-26 02:45:11', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:45:11', '2017-01-26 02:45:11', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:45:11', '2017-01-26 02:45:11', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:45:11', '2017-01-26 02:45:11', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:45:11', '2017-01-26 02:45:11', 436277767)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:45:12', '2017-01-26 02:45:12', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:45:12', '2017-01-26 02:45:12', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:45:12', '2017-01-26 02:45:12', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:45:12', '2017-01-26 02:45:12', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:45:12', '2017-01-26 02:45:12', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:45:12', '2017-01-26 02:45:12', 283047497)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (1.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (8.4ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (2.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "likes" WHERE "likes"."book_id" = $1  [["book_id", 168464791]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (8.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "likes"
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (4.2ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.5ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.9ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (22.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (19.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (1.5ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 436277767)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:45:32', '2017-01-26 02:45:32', 283047497)
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.9ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (1.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[36mActiveRecord::SchemaMigration Load (8.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (30.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (1.0ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (0.9ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (22.9ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 436277767)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:45:55', '2017-01-26 02:45:55', 283047497)[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "likes"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (2.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (26.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (4.4ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (36.0ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (4.0ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (21.0ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (2.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 508637499)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 168464791)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 572977986)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 857228561)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 436277767)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:53:06', '2017-01-26 02:53:06', 283047497)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (2.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "likes"
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.4ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[36mActiveRecord::SchemaMigration Load (9.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (2.0ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (29.3ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "likes"[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (6.6ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (22.6ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 436277767)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:53:20', '2017-01-26 02:53:20', 283047497)[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (26.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (2.0ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (33.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (7.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "books"
  [1m[36m (2.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "likes"
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (14.5ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (24.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 436277767)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:54:28', '2017-01-26 02:54:28', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 223486541)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.7ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:54:28', '2017-01-26 02:54:28', 283047497)
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.6ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (20.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (9.6ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (27.5ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (18.4ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "books"[0m
  [1m[35m (3.8ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "likes"[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 2
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (9.4ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (20.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 436277767)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:55:23', '2017-01-26 02:55:23', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 223486541)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.9ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:55:23', '2017-01-26 02:55:23', 283047497)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (27.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (33.2ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.4ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (1.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36m (6.7ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (29.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (2.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 436277767)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:09', '2017-01-26 02:57:09', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 223486541)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:57:09', '2017-01-26 02:57:09', 283047497)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.9ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.7ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (12.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.3ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (24.4ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (1.7ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 436277767)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-26 02:57:24', '2017-01-26 02:57:24', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 223486541)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-26 02:57:24', '2017-01-26 02:57:24', 283047497)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.5ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (28.1ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.8ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (1.0ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.5ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (27.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (6.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (35.2ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (8.1ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 168464791 and t2.book_id != 168464791
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 10
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.8ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.9ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35m (21.0ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (5.8ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (91.4ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (40.0ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 644331355)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 436277767)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (10.9ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-01-28 19:26:04', '2017-01-28 19:26:04', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (4.3ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (11.7ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 223486541)[0m
  [1m[35mFixture Delete (6.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (18.8ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 557192574)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-01-28 19:26:04', '2017-01-28 19:26:04', 283047497)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.3ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.7ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.tag_id) & array_agg(DISTINCT t2.tag_id)))::float/
              (# (array_agg(DISTINCT t1.tag_id) | array_agg(DISTINCT t2.tag_id)))::float as similarity
            FROM books_tags AS t1, books_tags AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1[0m
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books"  ORDER BY "books"."id" ASC LIMIT 1
  [1m[36mActiveRecord::SchemaMigration Load (34.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36m (18.5ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (6.4ms)[0m  BEGIN
  [1m[36mFixture Delete (13.5ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (6.6ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (2.6ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 436277767)
  [1m[36mFixture Delete (1.2ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (3.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 02:47:04', '2017-02-17 02:47:04', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (2.9ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 223486541)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 02:47:04', '2017-02-17 02:47:04', 283047497)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (27.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.1ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (6.4ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (30.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (2.6ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (23.5ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (2.5ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 436277767)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (2.8ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:06:50', '2017-02-17 03:06:50', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 223486541)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (2.4ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 557192574)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:06:50', '2017-02-17 03:06:50', 283047497)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (2.1ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 436277767)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:01', '2017-02-17 03:07:01', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 223486541)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:07:01', '2017-02-17 03:07:01', 283047497)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[36mActiveRecord::SchemaMigration Load (14.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (26.4ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 436277767)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (3.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:07:53', '2017-02-17 03:07:53', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 223486541)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:07:53', '2017-02-17 03:07:53', 283047497)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "likes" ON "users"."id" = "likes"."user_id" WHERE "likes"."book_id" = $1[0m  [["book_id", 572977986]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "likes" ON "users"."id" = "likes"."user_id" WHERE "likes"."book_id" = $1[0m  [["book_id", 572977986]]
  [1m[36mActiveRecord::SchemaMigration Load (20.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (20.8ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (1.9ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 436277767)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (2.8ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:09:20', '2017-02-17 03:09:20', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 223486541)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:09:20', '2017-02-17 03:09:20', 283047497)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (24.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (24.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (1.9ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 266251676)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 436277767)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (2.9ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:10:53', '2017-02-17 03:10:53', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (1.5ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 223486541)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:10:53', '2017-02-17 03:10:53', 283047497)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (25.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.0ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (2.1ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (24.6ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (2.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 436277767)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (3.0ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:18', '2017-02-17 03:12:18', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (1.7ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 223486541)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:12:18', '2017-02-17 03:12:18', 283047497)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (19.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.3ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (27.4ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (1.8ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 436277767)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (2.3ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:12:40', '2017-02-17 03:12:40', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 223486541)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:12:40', '2017-02-17 03:12:40', 283047497)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (30.1ms)[0m  [1m            WITH similar_items AS (
              SELECT
                t2.book_id,
                (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
                (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
              FROM likes AS t1, likes AS t2
              WHERE t1.book_id = 572977986 and t2.book_id != 572977986
              GROUP BY t2.book_id
              ORDER BY similarity DESC
              LIMIT 3
            )
            SELECT books.*, similarity
            FROM similar_items
            JOIN books ON books.id = similar_items.book_id
            ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.7ms)[0m  [1m            WITH similar_items AS (
              SELECT
                t2.book_id,
                (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
                (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
              FROM likes AS t1, likes AS t2
              WHERE t1.book_id = 572977986 and t2.book_id != 572977986
              GROUP BY t2.book_id
              ORDER BY similarity DESC
              LIMIT 3
            )
            SELECT books.*, similarity
            FROM similar_items
            JOIN books ON books.id = similar_items.book_id
            ORDER BY similarity DESC;
[0m
  [1m[36mActiveRecord::SchemaMigration Load (26.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.6ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (2.5ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (4.6ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (27.5ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 266251676)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 436277767)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (3.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:20:22', '2017-02-17 03:20:22', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 223486541)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.6ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 557192574)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 944878372)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 492947529)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 3097974)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:20:22', '2017-02-17 03:20:22', 283047497)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (2.0ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (21.0ms)[0m  [1m            WITH similar_items AS (
              SELECT
                t2.book_id,
                (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
                (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
              FROM likes AS t1, likes AS t2
              WHERE t1.book_id = 572977986 and t2.book_id != 572977986
              GROUP BY t2.book_id
              ORDER BY similarity DESC
              LIMIT 3
            )
            SELECT books.*, similarity
            FROM similar_items
            JOIN books ON books.id = similar_items.book_id
            ORDER BY similarity DESC;
[0m
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (1.1ms)[0m  [1m            WITH similar_items AS (
              SELECT
                t2.book_id,
                (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
                (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
              FROM likes AS t1, likes AS t2
              WHERE t1.book_id = 572977986 and t2.book_id != 572977986
              GROUP BY t2.book_id
              ORDER BY similarity DESC
              LIMIT 3
            )
            SELECT books.*, similarity
            FROM similar_items
            JOIN books ON books.id = similar_items.book_id
            ORDER BY similarity DESC;
[0m
  [1m[36mActiveRecord::SchemaMigration Load (28.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (3.2ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.4ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (31.2ms)[0m              WITH similar_items AS (
              SELECT
                t2.book_id,
                (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
                (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
              FROM likes AS t1, likes AS t2
              WHERE t1.book_id = 572977986 and t2.book_id != 572977986
              GROUP BY t2.book_id
              ORDER BY similarity DESC
              LIMIT 3
            )
            SELECT books.*, similarity
            FROM similar_items
            JOIN books ON books.id = similar_items.book_id
            ORDER BY similarity DESC;

  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.8ms)[0m              WITH similar_items AS (
              SELECT
                t2.book_id,
                (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
                (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
              FROM likes AS t1, likes AS t2
              WHERE t1.book_id = 572977986 and t2.book_id != 572977986
              GROUP BY t2.book_id
              ORDER BY similarity DESC
              LIMIT 3
            )
            SELECT books.*, similarity
            FROM similar_items
            JOIN books ON books.id = similar_items.book_id
            ORDER BY similarity DESC;

  [1m[36m (3.5ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (2.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (19.8ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (2.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 508637499)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 436277767)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (2.8ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:23:57', '2017-02-17 03:23:57', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (1.7ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 223486541)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:23:57', '2017-02-17 03:23:57', 283047497)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (26.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (2.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (2.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (22.4ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (2.4ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 436277767)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (3.0ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:25:20', '2017-02-17 03:25:20', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (1.6ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 223486541)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:25:20', '2017-02-17 03:25:20', 283047497)[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (24.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.4ms)[0m  ALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "books_tags"
  [1m[36mFixture Delete (5.7ms)[0m  [1mDELETE FROM "books"[0m
  [1m[35mFixture Insert (30.8ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)
  [1m[36mFixture Insert (2.4ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 436277767)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "likes"
  [1m[36mFixture Insert (2.9ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 683130438, 557192574, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 834596858, 557192574, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 112844655, 944878372, 266251676)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 417155790, 944878372, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 802847325, 492947529, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 919808993, 492947529, 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 30677878, 165965450, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 292226793, 165965450, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 644626036, 3097974, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 1063610316, 3097974, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 140662621, 3097974, 857228561)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 369541888, 283047497, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 553775723, 283047497, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:22', '2017-02-17 03:28:22', 940090323, 283047497, 436277767)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "tags"[0m
  [1m[35mFixture Insert (1.8ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 794233342)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 405042892)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 270779907)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 32674512)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 393102864)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 223486541)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.8ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 557192574)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 944878372)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 492947529)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 165965450)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 3097974)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:28:22', '2017-02-17 03:28:22', 283047497)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (22.9ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Ruby"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning C++"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Playing Violin"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Python"]]
  [1m[36mBook Load (0.6ms)[0m  [1m          WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;
[0m
  [1m[36mActiveRecord::SchemaMigration Load (8.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mBook Load (0.3ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Learning Ruby"]]
  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning C++"]]
  [1m[35mBook Load (0.1ms)[0m  SELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1  [["name", "Playing Violin"]]
  [1m[36mBook Load (0.1ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (27.9ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36mBook Load (0.2ms)[0m  [1mSELECT  "books".* FROM "books" WHERE "books"."name" = $1 LIMIT 1[0m  [["name", "Learning Python"]]
  [1m[35mBook Load (0.7ms)[0m            WITH similar_items AS (
            SELECT
              t2.book_id,
              (# (array_agg(DISTINCT t1.user_id) & array_agg(DISTINCT t2.user_id)))::float/
              (# (array_agg(DISTINCT t1.user_id) | array_agg(DISTINCT t2.user_id)))::float as similarity
            FROM likes AS t1, likes AS t2
            WHERE t1.book_id = 572977986 and t2.book_id != 572977986
            GROUP BY t2.book_id
            ORDER BY similarity DESC
            LIMIT 3
          )
          SELECT books.*, similarity
          FROM similar_items
          JOIN books ON books.id = similar_items.book_id
          ORDER BY similarity DESC;

  [1m[36m (1.0ms)[0m  [1mALTER TABLE "tags" DISABLE TRIGGER ALL;ALTER TABLE "books_tags" DISABLE TRIGGER ALL;ALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "likes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "books_tags"[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "books"
  [1m[36mFixture Insert (20.5ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (266251676, 270779907)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 794233342)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (644331355, 270779907)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (508637499, 794233342)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 405042892)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 32674512)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (168464791, 393102864)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 405042892)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 32674512)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (572977986, 393102864)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (857228561, 32674512)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 405042892)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books_tags" ("book_id", "tag_id") VALUES (436277767, 223486541)[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Harry Potter', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Lord of the Rings', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Great Expectations', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 508637499)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Ruby', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning Python', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Learning C++', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 857228561)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('Playing Violin', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 436277767)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "likes"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 683130438, 557192574, 266251676)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 834596858, 557192574, 644331355)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 112844655, 944878372, 266251676)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 417155790, 944878372, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 802847325, 492947529, 644331355)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 919808993, 492947529, 508637499)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 30677878, 165965450, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 292226793, 165965450, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 644626036, 3097974, 168464791)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 1063610316, 3097974, 572977986)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 140662621, 3097974, 857228561)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 369541888, 283047497, 168464791)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 553775723, 283047497, 572977986)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "likes" ("created_at", "updated_at", "id", "user_id", "book_id") VALUES ('2017-02-17 03:28:42', '2017-02-17 03:28:42', 940090323, 283047497, 436277767)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "tags"
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fiction', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 794233342)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Nonfiction', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 405042892)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('Fantasy', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 270779907)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('programming', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 32674512)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('scripting', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 393102864)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "tags" ("name", "created_at", "updated_at", "id") VALUES ('music', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 223486541)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fred', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 557192574)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fanny', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 944878372)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Fiction Fil', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 492947529)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paulina', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 165965450)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paul', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 3097974)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "created_at", "updated_at", "id") VALUES ('Programmer Paige', '2017-02-17 03:28:42', '2017-02-17 03:28:42', 283047497)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "tags" ENABLE TRIGGER ALL;ALTER TABLE "books_tags" ENABLE TRIGGER ALL;ALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "likes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
SimpleRecommenderTest: test_module_exists
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
